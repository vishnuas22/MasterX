# üé® MASTERX FRONTEND - COMPLETE FILE DOCUMENTATION (PART 5)

**Files 29-46: Type Definitions, Config Files & Basic UI Components**

**Following:** AGENTS_FRONTEND.md - Strict TypeScript, WCAG 2.1 AA, Performance-First

---

## üìò TYPE DEFINITIONS

### 29. `src/types/user.types.ts` - User & Authentication Types

**Purpose:** Type-safe user and authentication data structures matching backend exactly

**What This File Contributes:**
1. User profile types from backend `UserDocument`
2. Authentication request/response types
3. Subscription tiers
4. Learning preferences

**Implementation:**
```typescript
/**
 * User & Authentication Types
 * 
 * Matches backend models.py exactly:
 * - UserDocument (lines 107-136)
 * - RegisterRequest (lines 409-414)
 * - LoginRequest (lines 417-420)
 * - TokenResponse (lines 423-429)
 * - UserResponse (lines 436-445)
 */

// ============================================================================
// ENUMS
// ============================================================================

export enum SubscriptionTier {
  FREE = 'free',
  PRO = 'pro',
  PREMIUM = 'premium',
}

export enum LearningStyle {
  VISUAL = 'visual',
  AUDITORY = 'auditory',
  KINESTHETIC = 'kinesthetic',
  READING_WRITING = 'reading_writing',
}

// ============================================================================
// USER PROFILE TYPES
// ============================================================================

export interface LearningPreferences {
  preferred_subjects: string[];
  learning_style: LearningStyle;
  difficulty_preference: 'easy' | 'medium' | 'hard' | 'adaptive';
  session_length_minutes?: number;
  notifications_enabled?: boolean;
}

export interface EmotionalProfile {
  baseline_engagement: number; // 0.0 - 1.0
  frustration_threshold: number; // 0.0 - 1.0
  celebration_responsiveness: number; // 0.0 - 1.0
}

export interface User {
  id: string; // UUID
  email: string;
  name: string;
  created_at: string; // ISO 8601
  learning_preferences: LearningPreferences;
  emotional_profile: EmotionalProfile;
  subscription_tier: SubscriptionTier;
  total_sessions: number;
  last_active: string; // ISO 8601
}

export interface UserDocument extends User {
  // Additional fields from backend UserDocument
  is_active: boolean;
  is_verified: boolean;
  failed_login_attempts?: number;
  locked_until?: string | null; // ISO 8601
}

// ============================================================================
// AUTHENTICATION TYPES
// ============================================================================

export interface LoginCredentials {
  email: string;
  password: string;
}

export interface SignupData {
  email: string;
  password: string;
  name: string;
  preferences?: Partial<LearningPreferences>;
}

export interface LoginResponse {
  access_token: string;
  refresh_token: string;
  token_type: 'Bearer';
  expires_in: number; // seconds
  user: {
    id: string;
    email: string;
    name: string;
  };
}

export interface TokenVerifyResponse {
  user_id: string;
  email: string;
  exp: number; // Unix timestamp
}

export interface UserProfileResponse {
  id: string;
  email: string;
  name: string;
  subscription_tier: SubscriptionTier;
  total_sessions: number;
  created_at: string;
  last_active: string;
}

// ============================================================================
// SESSION TYPES
// ============================================================================

export enum SessionStatus {
  ACTIVE = 'active',
  COMPLETED = 'completed',
  ABANDONED = 'abandoned',
}

export interface LearningSession {
  id: string; // UUID
  user_id: string;
  started_at: string; // ISO 8601
  ended_at?: string | null;
  current_topic?: string;
  assigned_provider?: string;
  total_messages: number;
  total_tokens: number;
  total_cost: number;
  avg_response_time_ms: number;
  emotion_trajectory: string[];
  performance_score: number; // 0.0 - 1.0
  status: SessionStatus;
}

// ============================================================================
// TYPE GUARDS
// ============================================================================

export const isUser = (obj: unknown): obj is User => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'id' in obj &&
    'email' in obj &&
    'name' in obj
  );
};

export const isLoginResponse = (obj: unknown): obj is LoginResponse => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'access_token' in obj &&
    'refresh_token' in obj &&
    'user' in obj
  );
};

// ============================================================================
// HELPER TYPES
// ============================================================================

export type PartialUser = Partial<User>;
export type UserUpdatePayload = Pick<User, 'name'> & {
  learning_preferences?: Partial<LearningPreferences>;
};
```

**Key Features:**
1. **Exact backend match:** Types mirror backend models.py
2. **Type guards:** Runtime type checking
3. **Strict nullability:** Explicit null/undefined handling
4. **Enums:** Type-safe constants
5. **Helper types:** Utility types for common operations

**Connected Files:**
- ‚Üê Backend: `core/models.py` (UserDocument, RegisterRequest, etc.)
- ‚Üí `store/authStore.ts` (uses User, LoginResponse)
- ‚Üí `services/api/auth.api.ts` (API types)
- ‚Üí All components using user data

---

### 30. `src/types/emotion.types.ts` - Emotion Detection Types

**Purpose:** Complete emotion detection type system matching backend

**What This File Contributes:**
1. 27 emotion categories (GoEmotions)
2. PAD dimensions (Pleasure-Arousal-Dominance)
3. Learning readiness states
4. Cognitive load levels
5. Flow state indicators

**Implementation:**
```typescript
/**
 * Emotion Detection Types
 * 
 * Matches backend emotion_core.py exactly:
 * - EmotionCategory (lines 29-78)
 * - LearningReadiness (lines 84-101)
 * - CognitiveLoadLevel (lines 104-121)
 * - FlowStateIndicator (lines 124-145)
 * - EmotionMetrics (lines 283-507)
 */

// ============================================================================
// EMOTION CATEGORIES (27 from GoEmotions Dataset)
// ============================================================================

export enum EmotionCategory {
  // Positive emotions (12)
  ADMIRATION = 'admiration',
  AMUSEMENT = 'amusement',
  APPROVAL = 'approval',
  CARING = 'caring',
  DESIRE = 'desire',
  EXCITEMENT = 'excitement',
  GRATITUDE = 'gratitude',
  JOY = 'joy',
  LOVE = 'love',
  OPTIMISM = 'optimism',
  PRIDE = 'pride',
  RELIEF = 'relief',
  
  // Negative emotions (11)
  ANGER = 'anger',
  ANNOYANCE = 'annoyance',
  DISAPPOINTMENT = 'disappointment',
  DISAPPROVAL = 'disapproval',
  DISGUST = 'disgust',
  EMBARRASSMENT = 'embarrassment',
  FEAR = 'fear',
  GRIEF = 'grief',
  NERVOUSNESS = 'nervousness',
  REMORSE = 'remorse',
  SADNESS = 'sadness',
  
  // Ambiguous emotions (4)
  CONFUSION = 'confusion',
  CURIOSITY = 'curiosity',
  REALIZATION = 'realization',
  SURPRISE = 'surprise',
  
  // Neutral state (1)
  NEUTRAL = 'neutral',
}

// ============================================================================
// LEARNING-SPECIFIC STATES
// ============================================================================

export enum LearningReadiness {
  OPTIMAL = 'optimal',
  GOOD = 'good',
  MODERATE = 'moderate',
  LOW = 'low',
  BLOCKED = 'blocked',
}

export enum CognitiveLoadLevel {
  UNDER_STIMULATED = 'under_stimulated',
  OPTIMAL = 'optimal',
  MODERATE = 'moderate',
  HIGH = 'high',
  OVERLOADED = 'overloaded',
}

export enum FlowStateIndicator {
  DEEP_FLOW = 'deep_flow',
  FLOW = 'flow',
  NEAR_FLOW = 'near_flow',
  NOT_IN_FLOW = 'not_in_flow',
  ANXIETY = 'anxiety',
  BOREDOM = 'boredom',
}

export enum InterventionLevel {
  NONE = 'none',
  LOW = 'low',
  MEDIUM = 'medium',
  HIGH = 'high',
  CRITICAL = 'critical',
}

// ============================================================================
// CORE DATA STRUCTURES
// ============================================================================

export interface EmotionScore {
  emotion: EmotionCategory;
  confidence: number; // 0.0 - 1.0
}

export interface PADDimensions {
  pleasure: number; // -1.0 to 1.0 (negative to positive)
  arousal: number; // 0.0 to 1.0 (calm to excited)
  dominance: number; // 0.0 to 1.0 (submissive to in control)
}

export interface EmotionMetrics {
  // Raw ML predictions
  primary_emotion: EmotionCategory;
  primary_confidence: number; // 0.0 - 1.0
  secondary_emotions: EmotionScore[];
  emotion_scores: Record<string, number>;
  
  // PAD psychological dimensions
  pad_dimensions: PADDimensions;
  
  // Learning-specific assessments (ML-derived)
  learning_readiness: LearningReadiness;
  cognitive_load: CognitiveLoadLevel;
  flow_state: FlowStateIndicator;
  
  // Intervention recommendations (ML-driven)
  needs_intervention: boolean;
  intervention_level: InterventionLevel;
  suggested_actions: string[];
  
  // Metadata
  text_analyzed: string;
  processing_time_ms: number;
  model_version: string;
  timestamp: string; // ISO 8601
}

export interface EmotionState {
  primary_emotion: string;
  arousal: number; // 0.0 - 1.0
  valence: number; // 0.0 - 1.0
  learning_readiness: LearningReadiness;
}

export interface EmotionHistory {
  timestamp: string; // ISO 8601
  emotion: string;
  intensity: number;
  valence: number;
  arousal: number;
  learningReadiness?: LearningReadiness;
  cognitiveLoad?: CognitiveLoadLevel;
}

// ============================================================================
// EMOTION UI HELPERS
// ============================================================================

export interface EmotionColorMap {
  [key: string]: string; // CSS color
}

export const EMOTION_COLORS: EmotionColorMap = {
  joy: '#FFD60A',
  calm: '#64D2FF',
  focus: '#BF5AF2',
  frustration: '#FF453A',
  curiosity: '#30D158',
  confusion: '#FF9F0A',
  excitement: '#FFD60A',
  neutral: '#8E8E93',
  // Add all 27 emotions...
};

export interface EmotionVisualization {
  emotion: EmotionCategory;
  color: string;
  intensity: number;
  icon?: string; // emoji or icon name
}

// ============================================================================
// TYPE GUARDS
// ============================================================================

export const isEmotionMetrics = (obj: unknown): obj is EmotionMetrics => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'primary_emotion' in obj &&
    'primary_confidence' in obj &&
    'pad_dimensions' in obj
  );
};

export const isPADDimensions = (obj: unknown): obj is PADDimensions => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'pleasure' in obj &&
    'arousal' in obj &&
    'dominance' in obj
  );
};

// ============================================================================
// HELPER FUNCTIONS
// ============================================================================

export const getEmotionCategory = (emotion: string): EmotionCategory => {
  return (EmotionCategory[emotion.toUpperCase() as keyof typeof EmotionCategory] || EmotionCategory.NEUTRAL);
};

export const isPositiveEmotion = (emotion: EmotionCategory): boolean => {
  const positiveEmotions = [
    EmotionCategory.JOY,
    EmotionCategory.LOVE,
    EmotionCategory.EXCITEMENT,
    EmotionCategory.GRATITUDE,
    EmotionCategory.OPTIMISM,
    EmotionCategory.AMUSEMENT,
    EmotionCategory.ADMIRATION,
    EmotionCategory.APPROVAL,
    EmotionCategory.CARING,
    EmotionCategory.DESIRE,
    EmotionCategory.PRIDE,
    EmotionCategory.RELIEF,
  ];
  return positiveEmotions.includes(emotion);
};

export const isNegativeEmotion = (emotion: EmotionCategory): boolean => {
  const negativeEmotions = [
    EmotionCategory.ANGER,
    EmotionCategory.DISGUST,
    EmotionCategory.FEAR,
    EmotionCategory.GRIEF,
    EmotionCategory.SADNESS,
    EmotionCategory.DISAPPOINTMENT,
    EmotionCategory.EMBARRASSMENT,
    EmotionCategory.NERVOUSNESS,
    EmotionCategory.REMORSE,
    EmotionCategory.ANNOYANCE,
    EmotionCategory.DISAPPROVAL,
  ];
  return negativeEmotions.includes(emotion);
};
```

**Key Features:**
1. **Complete emotion taxonomy:** All 27 GoEmotions categories
2. **Learning psychology:** Readiness, flow, cognitive load
3. **Type safety:** Enums for all categorical data
4. **Helper functions:** Common emotion operations
5. **Visualization support:** Color mapping for UI

**Connected Files:**
- ‚Üê Backend: `services/emotion/emotion_core.py`
- ‚Üí `store/emotionStore.ts` (emotion state management)
- ‚Üí `components/emotion/*` (emotion visualization)
- ‚Üí `hooks/useEmotion.ts` (emotion operations)

---

### 31. `src/types/chat.types.ts` - Chat & Messaging Types

**Purpose:** Chat message types matching backend exactly

**What This File Contributes:**
1. Message structure from backend
2. Chat request/response types
3. Context and ability information
4. Real-time typing indicators

**Implementation:**
```typescript
/**
 * Chat & Messaging Types
 * 
 * Matches backend models.py:
 * - Message (lines 203-218)
 * - ChatRequest (lines 374-379)
 * - ChatResponse (lines 382-403)
 * - ContextInfo (lines 334-339)
 * - AbilityInfo (lines 342-347)
 */

import type { EmotionState, EmotionMetrics } from './emotion.types';

// ============================================================================
// MESSAGE TYPES
// ============================================================================

export enum MessageRole {
  USER = 'user',
  ASSISTANT = 'assistant',
  SYSTEM = 'system',
}

export interface Message {
  id: string; // UUID
  session_id: string;
  user_id: string;
  role: MessageRole;
  content: string;
  timestamp: string; // ISO 8601
  emotion?: EmotionState | EmotionMetrics | null;
  provider?: string;
  responseTime?: number; // milliseconds
  tokens_used?: number;
  cost?: number;
  embedding?: number[];
  quality_rating?: number; // 1-5
}

// ============================================================================
// CHAT API TYPES
// ============================================================================

export interface ChatRequest {
  user_id: string;
  session_id?: string;
  message: string;
  context?: Record<string, unknown>;
}

export interface ContextInfo {
  recent_messages_count: number;
  relevant_messages_count: number;
  has_context: boolean;
  retrieval_time_ms?: number;
}

export interface AbilityInfo {
  ability_level: number; // 0.0 - 1.0
  recommended_difficulty: number; // 0.0 - 1.0
  cognitive_load: number; // 0.0 - 1.0
  flow_state_score?: number;
}

export interface ChatResponse {
  session_id: string;
  message: string;
  emotion_state?: EmotionState | null;
  provider_used: string;
  response_time_ms: number;
  timestamp: string; // ISO 8601
  
  // Enhanced metadata (Phase 2-4)
  category_detected?: string;
  tokens_used?: number;
  cost?: number;
  
  // Phase 3 metadata
  context_retrieved?: ContextInfo;
  ability_info?: AbilityInfo;
  ability_updated?: boolean;
  
  // Phase 4 metadata
  cached?: boolean;
  processing_breakdown?: Record<string, number>;
}

// ============================================================================
// REAL-TIME TYPES (WebSocket)
// ============================================================================

export interface TypingIndicator {
  user_id: string;
  session_id: string;
  is_typing: boolean;
  timestamp: string;
}

export interface MessageUpdate {
  message_id: string;
  session_id: string;
  updates: Partial<Message>;
  timestamp: string;
}

export interface EmotionUpdate {
  session_id: string;
  emotion: string;
  confidence: number;
  timestamp: string;
}

// ============================================================================
// CHAT UI STATE
// ============================================================================

export interface ChatUIState {
  isTyping: boolean;
  isLoading: boolean;
  error: string | null;
  scrollToBottom: boolean;
}

export interface MessageGroup {
  date: string; // YYYY-MM-DD
  messages: Message[];
}

// ============================================================================
// TYPE GUARDS
// ============================================================================

export const isMessage = (obj: unknown): obj is Message => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'id' in obj &&
    'role' in obj &&
    'content' in obj
  );
};

export const isChatResponse = (obj: unknown): obj is ChatResponse => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'session_id' in obj &&
    'message' in obj &&
    'provider_used' in obj
  );
};

// ============================================================================
// HELPER TYPES
// ============================================================================

export type MessageWithEmotion = Message & {
  emotion: EmotionMetrics;
};

export type OptimisticMessage = Omit<Message, 'id'> & {
  id: string;
  optimistic: boolean;
};
```

**Key Features:**
1. **Complete message structure:** All backend fields
2. **Real-time support:** WebSocket event types
3. **Optimistic updates:** Temporary message IDs
4. **Type guards:** Runtime validation
5. **UI helpers:** Message grouping, state management

**Connected Files:**
- ‚Üê Backend: `core/models.py` (Message, ChatRequest, ChatResponse)
- ‚Üí `store/chatStore.ts` (chat state)
- ‚Üí `services/api/chat.api.ts` (API calls)
- ‚Üí `components/chat/*` (UI components)

---

### 32. `src/types/api.types.ts` - Generic API Types

**Purpose:** Reusable API types and patterns

**What This File Contributes:**
1. Generic API response wrappers
2. Error types
3. Pagination types
4. Loading states
5. API status codes

**Implementation:**
```typescript
/**
 * Generic API Types
 * 
 * Reusable types for all API interactions
 * Following REST best practices
 */

// ============================================================================
// API RESPONSE WRAPPERS
// ============================================================================

export interface APIResponse<T> {
  data: T;
  status: number;
  message?: string;
  timestamp: string;
}

export interface APIError {
  error: string;
  message: string;
  details?: Record<string, unknown>;
  status: number;
  timestamp: string;
}

export interface ValidationError {
  field: string;
  message: string;
  code: string;
}

export interface APIValidationError extends APIError {
  validation_errors: ValidationError[];
}

// ============================================================================
// PAGINATION TYPES
// ============================================================================

export interface PaginationParams {
  page: number;
  limit: number;
  sort_by?: string;
  sort_order?: 'asc' | 'desc';
}

export interface PaginatedResponse<T> {
  data: T[];
  pagination: {
    current_page: number;
    total_pages: number;
    total_items: number;
    items_per_page: number;
    has_next: boolean;
    has_previous: boolean;
  };
}

// ============================================================================
// LOADING STATES
// ============================================================================

export type LoadingState = 'idle' | 'loading' | 'success' | 'error';

export interface AsyncState<T> {
  data: T | null;
  loading: boolean;
  error: string | null;
  timestamp?: string;
}

export interface QueryState<T> extends AsyncState<T> {
  isFetching: boolean;
  isStale: boolean;
}

// ============================================================================
// HTTP STATUS CODES
// ============================================================================

export enum HTTPStatus {
  OK = 200,
  CREATED = 201,
  NO_CONTENT = 204,
  BAD_REQUEST = 400,
  UNAUTHORIZED = 401,
  FORBIDDEN = 403,
  NOT_FOUND = 404,
  CONFLICT = 409,
  UNPROCESSABLE_ENTITY = 422,
  TOO_MANY_REQUESTS = 429,
  INTERNAL_SERVER_ERROR = 500,
  SERVICE_UNAVAILABLE = 503,
}

// ============================================================================
// API CONFIGURATION
// ============================================================================

export interface APIConfig {
  baseURL: string;
  timeout: number;
  headers: Record<string, string>;
  retries: number;
  retryDelay: number;
}

export interface RequestConfig {
  method: 'GET' | 'POST' | 'PUT' | 'PATCH' | 'DELETE';
  url: string;
  data?: unknown;
  params?: Record<string, unknown>;
  headers?: Record<string, string>;
  timeout?: number;
  retry?: boolean;
}

// ============================================================================
// TYPE GUARDS
// ============================================================================

export const isAPIError = (obj: unknown): obj is APIError => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'error' in obj &&
    'status' in obj
  );
};

export const isAPIValidationError = (obj: unknown): obj is APIValidationError => {
  return (
    isAPIError(obj) &&
    'validation_errors' in obj &&
    Array.isArray((obj as APIValidationError).validation_errors)
  );
};

// ============================================================================
// HELPER TYPES
// ============================================================================

export type APIPromise<T> = Promise<APIResponse<T>>;
export type QueryKey = readonly unknown[];
```

**Key Features:**
1. **Generic wrappers:** Reusable response types
2. **Error handling:** Comprehensive error types
3. **Pagination:** Standard pagination pattern
4. **Loading states:** Async operation tracking
5. **Type safety:** Type guards for runtime checks

**Connected Files:**
- ‚Üí All `*.api.ts` files (use these types)
- ‚Üí React Query hooks (QueryState)
- ‚Üí Error boundaries (APIError)

---

### 33. `src/types/analytics.types.ts` - Analytics & Gamification Types

**Purpose:** Analytics, performance, and gamification types

**What This File Contributes:**
1. Performance metrics
2. Learning analytics
3. Gamification data
4. Progress tracking

**Implementation:**
```typescript
/**
 * Analytics & Gamification Types
 * 
 * Matches backend analytics and gamification systems
 */

// ============================================================================
// PERFORMANCE METRICS
// ============================================================================

export interface PerformanceMetrics {
  user_id: string;
  time_range: string; // e.g., "7d", "30d"
  total_sessions: number;
  total_time_minutes: number;
  avg_session_duration_minutes: number;
  total_questions_answered: number;
  accuracy_rate: number; // 0.0 - 1.0
  improvement_rate: number; // percentage
  streak_days: number;
  timestamp: string;
}

export interface EmotionTrend {
  date: string; // YYYY-MM-DD
  dominant_emotion: string;
  positive_ratio: number; // 0.0 - 1.0
  negative_ratio: number;
  neutral_ratio: number;
  avg_learning_readiness: number;
  avg_cognitive_load: number;
}

export interface TopicMastery {
  topic: string;
  mastery_level: number; // 0.0 - 1.0
  questions_attempted: number;
  questions_correct: number;
  avg_difficulty: number;
  last_practiced: string; // ISO 8601
  next_review: string; // ISO 8601
}

export interface LearningVelocity {
  user_id: string;
  current_velocity: number; // topics per week
  velocity_trend: 'increasing' | 'stable' | 'decreasing';
  predicted_completion_days: number;
  milestones_achieved: number;
  timestamp: string;
}

export interface SessionStats {
  user_id: string;
  total_sessions: number;
  avg_duration_minutes: number;
  longest_session_minutes: number;
  favorite_time_of_day: string; // e.g., "morning", "evening"
  most_productive_day: string; // e.g., "Monday"
  total_cost_usd: number;
}

// ============================================================================
// GAMIFICATION TYPES
// ============================================================================

export interface GamificationProfile {
  user_id: string;
  level: number;
  xp: number;
  xp_to_next_level: number;
  elo_rating: number;
  current_streak: number;
  longest_streak: number;
  total_sessions: number;
  total_questions: number;
  total_time_minutes: number;
  achievements_unlocked: string[];
  badges: string[];
  rank: number; // Global rank
}

export interface Achievement {
  id: string;
  name: string;
  description: string;
  type: 'milestone' | 'streak' | 'mastery' | 'social' | 'special';
  rarity: 'common' | 'rare' | 'epic' | 'legendary';
  xp_reward: number;
  icon: string;
  criteria: Record<string, unknown>;
  unlocked_at?: string; // ISO 8601
}

export interface LeaderboardEntry {
  rank: number;
  user_id: string;
  user_name: string;
  metric_value: number; // XP, ELO, etc.
  avatar_url?: string;
  is_current_user: boolean;
}

export interface ActivityRecord {
  user_id: string;
  session_id: string;
  question_difficulty: number;
  success: boolean;
  time_spent_seconds: number;
  timestamp: string;
}

// ============================================================================
// SPACED REPETITION TYPES
// ============================================================================

export interface SpacedRepetitionCard {
  id: string;
  user_id: string;
  topic: string;
  content: Record<string, unknown>;
  difficulty: 'easy' | 'medium' | 'hard';
  interval_days: number;
  repetitions: number;
  ease_factor: number;
  next_review_date: string; // ISO 8601
  last_reviewed_date?: string;
  created_at: string;
}

export interface ReviewResult {
  card_id: string;
  quality: number; // 0-5
  new_interval_days: number;
  new_ease_factor: number;
  next_review_date: string;
}

// ============================================================================
// DASHBOARD TYPES
// ============================================================================

export interface DashboardData {
  user: {
    name: string;
    level: number;
    xp: number;
    streak: number;
  };
  today: {
    sessions: number;
    time_minutes: number;
    questions: number;
    accuracy: number;
  };
  week: {
    sessions: number;
    time_minutes: number;
    improvement: number;
  };
  insights: string[];
  recent_achievements: Achievement[];
  upcoming_reviews: number;
}

// ============================================================================
// TYPE GUARDS
// ============================================================================

export const isPerformanceMetrics = (obj: unknown): obj is PerformanceMetrics => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'user_id' in obj &&
    'total_sessions' in obj
  );
};

export const isGamificationProfile = (obj: unknown): obj is GamificationProfile => {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'level' in obj &&
    'xp' in obj &&
    'elo_rating' in obj
  );
};
```

**Key Features:**
1. **Complete analytics:** All performance metrics
2. **Gamification:** Levels, XP, achievements
3. **Spaced repetition:** Card scheduling
4. **Dashboard data:** Aggregated insights
5. **Type safety:** Comprehensive type coverage

**Connected Files:**
- ‚Üê Backend: `services/analytics.py`, `services/gamification.py`
- ‚Üí `store/analyticsStore.ts`
- ‚Üí `services/api/analytics.api.ts`
- ‚Üí `components/analytics/*`
- ‚Üí `components/gamification/*`

---

## ‚öôÔ∏è CONFIGURATION FILES

### 34. `src/config/constants.ts` - Application Constants

**Purpose:** Centralized constants and configuration values

**What This File Contributes:**
1. App-wide constants
2. API timeouts
3. Cache durations
4. UI configuration

**Implementation:**
```typescript
/**
 * Application Constants
 * 
 * Following AGENTS_FRONTEND.md:
 * - No magic numbers in code
 * - Centralized configuration
 * - Type-safe constants
 */

// ============================================================================
// APPLICATION INFO
// ============================================================================

export const APP_NAME = 'MasterX';
export const APP_VERSION = '1.0.0';
export const APP_DESCRIPTION = 'AI-Powered Adaptive Learning Platform';

// ============================================================================
// API CONFIGURATION
// ============================================================================

export const API_CONFIG = {
  TIMEOUT: 30000, // 30 seconds
  RETRY_ATTEMPTS: 3,
  RETRY_DELAY: 1000, // 1 second
  MAX_RETRY_DELAY: 30000, // 30 seconds
} as const;

export const CACHE_DURATION = {
  USER_PROFILE: 5 * 60 * 1000, // 5 minutes
  ANALYTICS: 10 * 60 * 1000, // 10 minutes
  LEADERBOARD: 2 * 60 * 1000, // 2 minutes
  ACHIEVEMENTS: 30 * 60 * 1000, // 30 minutes
} as const;

// ============================================================================
// WEBSOCKET CONFIGURATION
// ============================================================================

export const WEBSOCKET_CONFIG = {
  RECONNECT_ATTEMPTS: 5,
  RECONNECT_DELAY: 1000,
  HEARTBEAT_INTERVAL: 30000, // 30 seconds
} as const;

// ============================================================================
// UI CONFIGURATION
// ============================================================================

export const UI_CONFIG = {
  TOAST_DURATION: 3000, // 3 seconds
  ANIMATION_DURATION: 250, // 250ms
  DEBOUNCE_DELAY: 500, // 500ms
  SCROLL_THRESHOLD: 100, // pixels
  MAX_MESSAGE_LENGTH: 10000,
  MAX_FILE_SIZE: 10 * 1024 * 1024, // 10MB
} as const;

export const BREAKPOINTS = {
  SM: 640,
  MD: 768,
  LG: 1024,
  XL: 1280,
  '2XL': 1536,
} as const;

// ============================================================================
// EMOTION CONFIGURATION
// ============================================================================

export const EMOTION_CONFIG = {
  HISTORY_LIMIT: 100, // Keep last 100 emotions
  UPDATE_INTERVAL: 1000, // Update every 1 second
  VISUALIZATION_POINTS: 50, // Chart data points
} as const;

// ============================================================================
// CHAT CONFIGURATION
// ============================================================================

export const CHAT_CONFIG = {
  MAX_MESSAGES_DISPLAY: 50,
  MESSAGE_BATCH_SIZE: 20,
  TYPING_INDICATOR_DELAY: 500,
  AUTO_SCROLL_THRESHOLD: 100,
} as const;

// ============================================================================
// STORAGE KEYS
// ============================================================================

export const STORAGE_KEYS = {
  AUTH_TOKEN: 'auth_token',
  REFRESH_TOKEN: 'refresh_token',
  USER_PROFILE: 'user_profile',
  THEME: 'theme',
  LANGUAGE: 'language',
  UI_PREFERENCES: 'ui_preferences',
} as const;

// ============================================================================
// ROUTES
// ============================================================================

export const ROUTES = {
  HOME: '/',
  LOGIN: '/login',
  SIGNUP: '/signup',
  ONBOARDING: '/onboarding',
  APP: '/app',
  DASHBOARD: '/app/dashboard',
  ANALYTICS: '/app/analytics',
  SETTINGS: '/app/settings',
  PROFILE: '/app/profile',
} as const;

// ============================================================================
// ERROR MESSAGES
// ============================================================================

export const ERROR_MESSAGES = {
  NETWORK_ERROR: 'Network error. Please check your connection.',
  AUTH_FAILED: 'Authentication failed. Please try again.',
  SESSION_EXPIRED: 'Session expired. Please log in again.',
  INVALID_INPUT: 'Invalid input. Please check your data.',
  SERVER_ERROR: 'Server error. Please try again later.',
  UNKNOWN_ERROR: 'An unknown error occurred.',
} as const;

// ============================================================================
// REGEX PATTERNS
// ============================================================================

export const REGEX_PATTERNS = {
  EMAIL: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
  PASSWORD: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/, // Min 8 chars, 1 uppercase, 1 lowercase, 1 number
  URL: /^https?:\/\/.+/,
} as const;

// ============================================================================
// TYPE EXPORTS
// ============================================================================

export type RouteKey = keyof typeof ROUTES;
export type StorageKey = keyof typeof STORAGE_KEYS;
```

**Key Features:**
1. **Centralized:** All constants in one place
2. **Type-safe:** `as const` for literal types
3. **Organized:** Grouped by functionality
4. **No magic numbers:** Named constants throughout
5. **Easily maintainable:** Single source of truth

**Connected Files:**
- ‚Üí All components import from here
- ‚Üí No hardcoded values in codebase
- ‚Üí Type-safe constant usage

---

### 35. `src/config/api.config.ts` - API Endpoints Configuration

**Purpose:** Centralized API endpoint definitions

**What This File Contributes:**
1. All backend API endpoints
2. URL construction helpers
3. Type-safe endpoint access

**Implementation:**
```typescript
/**
 * API Endpoints Configuration
 * 
 * Matches backend server.py endpoints exactly
 * Auto-generates typed endpoint URLs
 */

const API_BASE = import.meta.env.VITE_BACKEND_URL || 'http://localhost:8001';

// ============================================================================
// AUTHENTICATION ENDPOINTS
// ============================================================================

export const AUTH_ENDPOINTS = {
  REGISTER: `${API_BASE}/api/auth/register`,
  LOGIN: `${API_BASE}/api/auth/login`,
  LOGOUT: `${API_BASE}/api/auth/logout`,
  REFRESH: `${API_BASE}/api/auth/refresh`,
  ME: `${API_BASE}/api/auth/me`,
} as const;

// ============================================================================
// CHAT ENDPOINTS
// ============================================================================

export const CHAT_ENDPOINTS = {
  SEND_MESSAGE: `${API_BASE}/api/v1/chat`,
  GET_HISTORY: (sessionId: string) => `${API_BASE}/api/v1/chat/history/${sessionId}`,
  DELETE_SESSION: (sessionId: string) => `${API_BASE}/api/v1/chat/session/${sessionId}`,
} as const;

// ============================================================================
// ANALYTICS ENDPOINTS
// ============================================================================

export const ANALYTICS_ENDPOINTS = {
  DASHBOARD: (userId: string) => `${API_BASE}/api/v1/analytics/dashboard/${userId}`,
  PERFORMANCE: (userId: string, daysBack = 30) => 
    `${API_BASE}/api/v1/analytics/performance/${userId}?days_back=${daysBack}`,
  EMOTIONS: (userId: string, days = 7) => 
    `${API_BASE}/api/v1/analytics/emotions/${userId}?days=${days}`,
  TOPICS: (userId: string) => `${API_BASE}/api/v1/analytics/topics/${userId}`,
  VELOCITY: (userId: string) => `${API_BASE}/api/v1/analytics/velocity/${userId}`,
  SESSIONS: (userId: string) => `${API_BASE}/api/v1/analytics/sessions/${userId}`,
  INSIGHTS: (userId: string) => `${API_BASE}/api/v1/analytics/insights/${userId}`,
} as const;

// ============================================================================
// GAMIFICATION ENDPOINTS
// ============================================================================

export const GAMIFICATION_ENDPOINTS = {
  STATS: (userId: string) => `${API_BASE}/api/v1/gamification/stats/${userId}`,
  LEADERBOARD: (timeRange: string = 'weekly') => 
    `${API_BASE}/api/v1/gamification/leaderboard?time_range=${timeRange}`,
  ACHIEVEMENTS: `${API_BASE}/api/v1/gamification/achievements`,
  RECORD_ACTIVITY: `${API_BASE}/api/v1/gamification/record-activity`,
  STREAK: (userId: string) => `${API_BASE}/api/v1/gamification/streak/${userId}`,
} as const;

// ============================================================================
// VOICE ENDPOINTS
// ============================================================================

export const VOICE_ENDPOINTS = {
  TRANSCRIBE: `${API_BASE}/api/v1/voice/transcribe`,
  SYNTHESIZE: `${API_BASE}/api/v1/voice/synthesize`,
  ASSESS_PRONUNCIATION: `${API_BASE}/api/v1/voice/assess-pronunciation`,
  CHAT: `${API_BASE}/api/v1/voice/chat`,
  VOICES: `${API_BASE}/api/v1/voice/voices`,
} as const;

// ============================================================================
// PERSONALIZATION ENDPOINTS
// ============================================================================

export const PERSONALIZATION_ENDPOINTS = {
  PROFILE: (userId: string) => `${API_BASE}/api/v1/personalization/profile/${userId}`,
  RECOMMENDATIONS: (userId: string) => 
    `${API_BASE}/api/v1/personalization/recommendations/${userId}`,
  LEARNING_PATH: (userId: string, topic: string) => 
    `${API_BASE}/api/v1/personalization/learning-path/${userId}/${topic}`,
} as const;

// ============================================================================
// CONTENT ENDPOINTS
// ============================================================================

export const CONTENT_ENDPOINTS = {
  NEXT: (userId: string) => `${API_BASE}/api/v1/content/next/${userId}`,
  SEQUENCE: (userId: string, topic: string, nItems = 10) => 
    `${API_BASE}/api/v1/content/sequence/${userId}/${topic}?n_items=${nItems}`,
  SEARCH: (query: string, nResults = 5) => 
    `${API_BASE}/api/v1/content/search?query=${encodeURIComponent(query)}&n_results=${nResults}`,
} as const;

// ============================================================================
// SPACED REPETITION ENDPOINTS
// ============================================================================

export const SPACED_REPETITION_ENDPOINTS = {
  DUE_CARDS: (userId: string, limit = 20, includeNew = true) => 
    `${API_BASE}/api/v1/spaced-repetition/due-cards/${userId}?limit=${limit}&include_new=${includeNew}`,
  CREATE_CARD: `${API_BASE}/api/v1/spaced-repetition/create-card`,
  REVIEW_CARD: `${API_BASE}/api/v1/spaced-repetition/review-card`,
  STATS: (userId: string) => `${API_BASE}/api/v1/spaced-repetition/stats/${userId}`,
} as const;

// ============================================================================
// COLLABORATION ENDPOINTS
// ============================================================================

export const COLLABORATION_ENDPOINTS = {
  FIND_PEERS: `${API_BASE}/api/v1/collaboration/find-peers`,
  CREATE_SESSION: `${API_BASE}/api/v1/collaboration/create-session`,
  JOIN_SESSION: `${API_BASE}/api/v1/collaboration/join-session`,
  SEND_MESSAGE: `${API_BASE}/api/v1/collaboration/send-message`,
} as const;

// ============================================================================
// HEALTH & MONITORING ENDPOINTS
// ============================================================================

export const HEALTH_ENDPOINTS = {
  BASIC: `${API_BASE}/api/health`,
  DETAILED: `${API_BASE}/api/health/detailed`,
  PROVIDERS: `${API_BASE}/api/v1/providers`,
  MODEL_STATUS: `${API_BASE}/api/v1/system/model-status`,
} as const;

// ============================================================================
// ADMIN ENDPOINTS
// ============================================================================

export const ADMIN_ENDPOINTS = {
  COSTS: `${API_BASE}/api/v1/admin/costs`,
  PERFORMANCE: `${API_BASE}/api/v1/admin/performance`,
  CACHE: `${API_BASE}/api/v1/admin/cache`,
  PRODUCTION_READINESS: `${API_BASE}/api/v1/admin/production-readiness`,
  SYSTEM_STATUS: `${API_BASE}/api/v1/admin/system/status`,
} as const;

// ============================================================================
// BUDGET ENDPOINTS
// ============================================================================

export const BUDGET_ENDPOINTS = {
  STATUS: `${API_BASE}/api/v1/budget/status`,
} as const;

// ============================================================================
// ALL ENDPOINTS (for reference)
// ============================================================================

export const API_ENDPOINTS = {
  AUTH: AUTH_ENDPOINTS,
  CHAT: CHAT_ENDPOINTS,
  ANALYTICS: ANALYTICS_ENDPOINTS,
  GAMIFICATION: GAMIFICATION_ENDPOINTS,
  VOICE: VOICE_ENDPOINTS,
  PERSONALIZATION: PERSONALIZATION_ENDPOINTS,
  CONTENT: CONTENT_ENDPOINTS,
  SPACED_REPETITION: SPACED_REPETITION_ENDPOINTS,
  COLLABORATION: COLLABORATION_ENDPOINTS,
  HEALTH: HEALTH_ENDPOINTS,
  ADMIN: ADMIN_ENDPOINTS,
  BUDGET: BUDGET_ENDPOINTS,
} as const;

// ============================================================================
// HELPER TYPES
// ============================================================================

export type EndpointCategory = keyof typeof API_ENDPOINTS;
```

**Key Features:**
1. **Complete coverage:** All backend endpoints
2. **Type-safe:** Functions for dynamic URLs
3. **Environment-aware:** Uses VITE_BACKEND_URL
4. **Organized:** Grouped by feature
5. **Easy to maintain:** Single source of truth

**Connected Files:**
- ‚Üê Backend: `server.py` (all routes)
- ‚Üí All `*.api.ts` files
- ‚Üí Type-safe URL construction

---

## üìä FINAL PROGRESS UPDATE

**Files Completed:** 35/87 (40%)

**Part 5 Status:** 
- ‚úÖ Type Definitions (Files 29-33)
- ‚úÖ Config Files Started (Files 34-35)
- üìù Remaining: Files 36-46 (theme config, features, UI components)

**Next Steps:**
- Complete remaining config files (36-37)
- Create basic UI components (38-46)
- Then move to Part 6 (Layout & Auth components)

---

**Last Updated:** October 21, 2025  
**Status:** Part 5 - 40% Complete
**Following:** AGENTS_FRONTEND.md Principles Throughout
